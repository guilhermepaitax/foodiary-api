createMeal:
  handler: src/main/functions/meals/create-meal.handler
  events:
    - httpApi:
        method: POST
        path: /meals
        authorizer: CognitoAuthorizer

getMealsByDay:
  handler: src/main/functions/meals/get-meals-by-day.handler
  events:
    - httpApi:
        method: GET
        path: /meals
        authorizer: CognitoAuthorizer

getMealById:
  handler: src/main/functions/meals/get-meal-by-id.handler
  events:
    - httpApi:
        method: GET
        path: /meals/{mealId}
        authorizer: CognitoAuthorizer

onMealFileUploaded:
  handler: src/main/functions/meals/on-meal-file-uploaded.handler
  events:
    - s3:
        bucket: !Ref MealsBucket
        event: s3:ObjectCreated:*
        existing: true
        forceDeploy: true

processMeal:
  handler: src/main/functions/meals/process-meal.handler
  memorySize: 1024
  timeout: 120
  events:
    - sqs:
        arn: !GetAtt MealsQueue.Arn
        batchSize: 2
